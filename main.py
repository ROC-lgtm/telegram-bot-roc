import telebot
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton
import os
import logging
import time
import asyncio
import requests
from telebot.handler_backends import BaseMiddleware
from telebot import types

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler("bot.log"),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__)

logger.info("–ü–æ—á–∞—Ç–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞")

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Telegram –±–æ—Ç–∞
BOT_TOKEN = os.getenv("BOT_TOKEN")
KEEP_ALIVE_URL = os.getenv("RENDER_EXTERNAL_URL")  # –ù–∞–ø—Ä–∏–∫–ª–∞–¥, https://your-service.onrender.com

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è
if not BOT_TOKEN:
    logger.error("BOT_TOKEN –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è.")
    raise ValueError("BOT_TOKEN –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ")

try:
    bot = telebot.TeleBot(BOT_TOKEN)
    logger.info("–ë–æ—Ç —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ")
except Exception as e:
    logger.error(f"–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –±–æ—Ç–∞: {e}")
    raise

# Middleware –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤
class RateLimitMiddleware(BaseMiddleware):
    def __init__(self):
        self.last_request = {}

    def pre_process(self, message, data):
        chat_id = message.chat.id if isinstance(message, types.Message) else message.from_user.id
        current_time = time.time()
        if chat_id in self.last_request:
            if current_time - self.last_request[chat_id] < 0.5:  # –û–±–º–µ–∂–µ–Ω–Ω—è: 0.5 —Å–µ–∫
                return None  # –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ –∑–∞–ø–∏—Ç
        self.last_request[chat_id] = current_time
        return data

    def post_process(self, message, data, exception):
        pass

bot.setup_middleware(RateLimitMiddleware())

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è "–ø—ñ–Ω–≥—É–≤–∞–Ω–Ω—è" —Å–µ—Ä–≤–µ—Ä–∞
def keep_alive():
    if KEEP_ALIVE_URL:
        try:
            response = requests.get(KEEP_ALIVE_URL)
            logger.info(f"Keep-alive ping: {response.status_code}")
        except Exception as e:
            logger.error(f"–ü–æ–º–∏–ª–∫–∞ keep-alive: {e}")

# –§—É–Ω–∫—Ü—ñ—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
def send_main_menu(chat_id):
    welcome_text = (
        "–í–∞—Å –≤—ñ—Ç–∞—î\n"
        "*Reliable Outsorsing Company* ‚Äì\n"
        "–±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–∞ –∞—É—Ç—Å–æ—Ä—Å–∏–Ω–≥–æ–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—è"
    )
    markup = InlineKeyboardMarkup(row_width=1)
    markup.add(
        InlineKeyboardButton("üìã –¶—ñ–Ω–∏", callback_data="prices"),
        InlineKeyboardButton("üì≤ Instagram", url="https://www.instagram.com/reliable_outsorsing_company/"),
        InlineKeyboardButton("üíº –ö–æ–Ω—Ç–∞–∫—Ç–∏", callback_data="contacts"),
        InlineKeyboardButton("üë§ –ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é", callback_data="about")
    )
    try:
        bot.send_message(chat_id, welcome_text, reply_markup=markup, parse_mode="Markdown")
        logger.info(f"–í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é –¥–ª—è chat_id: {chat_id}")
    except Exception as e:
        logger.error(f"–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é: {e}")

# –û–±—Ä–æ–±–Ω–∏–∫ /start
@bot.message_handler(commands=['start'])
def handle_start(message):
    logger.info(f"–û—Ç—Ä–∏–º–∞–Ω–æ –∫–æ–º–∞–Ω–¥—É /start –≤—ñ–¥ {message.chat.id}")
    send_main_menu(message.chat.id)

# –û–±—Ä–æ–±–Ω–∏–∫ callback-–∑–∞–ø–∏—Ç—ñ–≤
@bot.callback_query_handler(func=lambda call: True)
def handle_query(call):
    chat_id = call.message.chat.id
    message_id = call.message.message_id
    logger.info(f"–û—Ç—Ä–∏–º–∞–Ω–æ callback: {call.data} –≤—ñ–¥ {chat_id}")

    def tpl_back():
        return InlineKeyboardMarkup(row_width=1).add(
            InlineKeyboardButton("üíº –ù–∞—à—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏", callback_data="contacts"),
            InlineKeyboardButton("üîô –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –º–µ–Ω—é", callback_data="prices")
        )

    try:
        if call.data == "prices":
            text = (
                "üíº *–¢–∞—Ä–∏—Ñ–∏ –Ω–∞ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –§–û–ü*\n"
                "üßæ –ö–æ–∂–µ–Ω —Ç–∞—Ä–∏—Ñ –≤–∫–ª—é—á–∞—î –±–∞–∑–æ–≤—ñ –ø–æ—Å–ª—É–≥–∏: –ø—ñ–¥–≥–æ—Ç–æ–≤–∫—É –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–ª–∞—Ç–µ–∂—ñ–≤, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É.\n"
                "üëá –û–±–µ—Ä—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ç–∞—Ä–∏—Ñ –Ω–∏–∂—á–µ:"
            )
            markup = InlineKeyboardMarkup(row_width=1)
            markup.add(
                InlineKeyboardButton("1Ô∏è‚É£ –§–û–ü 1 –≥—Ä—É–ø–∞ ‚Äî –≤—ñ–¥ 400 –≥—Ä–Ω/–º—ñ—Å", callback_data="fop1"),
                InlineKeyboardButton("2Ô∏è‚É£ –§–û–ü 2 –≥—Ä—É–ø–∞ ‚Äî –≤—ñ–¥ 400 –≥—Ä–Ω/–º—ñ—Å", callback_data="fop2"),
                InlineKeyboardButton("3Ô∏è‚É£ –§–û–ü 3 –≥—Ä—É–ø–∞ (–±–µ–∑ –ü–î–í) ‚Äî –≤—ñ–¥ 400 –≥—Ä–Ω/–º—ñ—Å", callback_data="fop3nopdv"),
                InlineKeyboardButton("3Ô∏è‚É£ –§–û–ü 3 –≥—Ä—É–ø–∞ (–∑ –ü–î–í) ‚Äî –≤—ñ–¥ 3500 –≥—Ä–Ω/–º—ñ—Å", callback_data="fop3pdv"),
                InlineKeyboardButton("üßç‚Äç‚ôÇÔ∏è –§–û–ü –∑ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞–º–∏ ‚Äî –≤—ñ–¥ 2300 –≥—Ä–Ω/–º—ñ—Å", callback_data="fop_staff"),
                InlineKeyboardButton("üìë –§–û–ü –Ω–∞ –∑–∞–≥–∞–ª—å–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ ‚Äî –≤—ñ–¥ 3500 –≥—Ä–Ω/–º—ñ—Å", callback_data="fop_general"),
                InlineKeyboardButton("üè¢ –¢–û–í/–ü–ü ‚Äî –≤—ñ–¥ 5000 –≥—Ä–Ω/–º—ñ—Å", callback_data="llc"),
                InlineKeyboardButton("üìù –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –§–û–ü ‚Äî 1000 –≥—Ä–Ω", callback_data="reg_fop"),
                InlineKeyboardButton("‚ùå –ó–∞–∫—Ä–∏—Ç—Ç—è –§–û–ü ‚Äî 1500 –≥—Ä–Ω", callback_data="close_fop"),
                InlineKeyboardButton("üìë –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è –§–û–ü –Ω–∞ –Ñ–ü ‚Äî 1000 –≥—Ä–Ω", callback_data="decl_fop"),
                InlineKeyboardButton("üîô –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é", callback_data="main_menu")
            )
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "fop1":
            text = (
                "üë§ *–§–û–ü 1 –≥—Ä—É–ø–∞ (—î–¥–∏–Ω–∏–π –ø–æ–¥–∞—Ç–æ–∫)*\n"
                "*–ë–∞–∑–æ–≤–∏–π —Ç–∞—Ä–∏—Ñ:* 400 –≥—Ä–Ω/–º—ñ—Å\n\n"
                "*–î–æ–∑–≤–æ–ª–µ–Ω–∞ –¥—ñ—è–ª—å–Ω—ñ—Å—Ç—å:*\n"
                "‚Ä¢ –ü—Ä–æ–¥–∞–∂ —Ç–æ–≤–∞—Ä—ñ–≤ —ñ–∑ —Ç–æ—Ä–≥–æ–≤–∏—Ö –º—ñ—Å—Ü—å –Ω–∞ —Ä–∏–Ω–∫–∞—Ö\n"
                "‚Ä¢ –ù–∞–¥–∞–Ω–Ω—è –ø–æ–±—É—Ç–æ–≤–∏—Ö –ø–æ—Å–ª—É–≥ –Ω–∞—Å–µ–ª–µ–Ω–Ω—é\n"
                "‚Ä¢ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –†–†–û\n"
                "‚Ä¢ –ë–µ–∑ –Ω–∞–π–º–∞–Ω–∏—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤\n\n"
                "*–£ —Ç–∞—Ä–∏—Ñ –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É —Ç–∞ –≤–µ–¥–µ–Ω–Ω—è –ö–Ω–∏–≥–∏ –æ–±–ª—ñ–∫—É\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ª—ñ–º—ñ—Ç—É –¥–æ—Ö–æ–¥—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≥—Ä—É–ø–∏\n"
                "‚úÖ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ —Å–ø–ª–∞—Ç—É –ø–æ–¥–∞—Ç–∫—ñ–≤, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–ª–∞—Ç\n"
                "‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–¥—ñ–π—Å–Ω–µ–Ω–Ω—è –æ–ø–ª–∞—Ç –ø–æ–¥–∞—Ç–∫—ñ–≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º (–∑–∞ –¥–æ—Å—Ç—É–ø–æ–º)\n"
                "‚úÖ –©–æ–º—ñ—Å—è—á–Ω–∏–π –∞—É–¥–∏—Ç –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∑–∞—è–≤, –ª–∏—Å—Ç—ñ–≤, –∑–∞–ø–∏—Ç—ñ–≤\n"
                "‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ—Ü–µ—Å—ñ —Å—É–ø—Ä–æ–≤–æ–¥—É\n\n"
                "üìå *–î–æ–¥–∞—Ç–∫–æ–≤–æ:* –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –†–†–û —Ç–∞/–∞–±–æ –µ–∫–≤–∞–π—Ä–∏–Ω–≥—É ‚Äî +100 –≥—Ä–Ω/–º—ñ—Å"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "fop2":
            text = (
                "üë§ *–§–û–ü 2 –≥—Ä—É–ø–∞ (—î–¥–∏–Ω–∏–π –ø–æ–¥–∞—Ç–æ–∫)*\n"
                "*–ë–∞–∑–æ–≤–∏–π —Ç–∞—Ä–∏—Ñ:* 400‚ÄØ–≥—Ä–Ω/–º—ñ—Å\n\n"
                "*–î—ñ—è–ª—å–Ω—ñ—Å—Ç—å –¥–æ–∑–≤–æ–ª–µ–Ω–∞:*\n"
                "‚Ä¢ –ü—Ä–æ–¥–∞–∂ —Ç–æ–≤–∞—Ä—ñ–≤ –±—É–¥—å‚Äë–∫–æ–º—É\n"
                "‚Ä¢ –ù–∞–¥–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥ –Ω–∞—Å–µ–ª–µ–Ω–Ω—é —Ç–∞ –ø–ª–∞—Ç–Ω–∏–∫–∞–º —î–¥–∏–Ω–æ–≥–æ –ø–æ–¥–∞—Ç–∫—É\n"
                "‚Ä¢ –î–æ 10 –Ω–∞–π–º–∞–Ω–∏—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤\n\n"
                "*–£ —Ç–∞—Ä–∏—Ñ –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É —Ç–∞ –ö–Ω–∏–≥–∏ –æ–±–ª—ñ–∫—É\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ª—ñ–º—ñ—Ç—É –¥–æ—Ö–æ–¥—É\n"
                "‚úÖ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ —Å–ø–ª–∞—Ç—É, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–ª–∞—Ç\n"
                "‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º (–∑–∞ –¥–æ—Å—Ç—É–ø–æ–º)\n"
                "‚úÖ –©–æ–º—ñ—Å—è—á–Ω–∏–π –∞—É–¥–∏—Ç –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∑–∞—è–≤, –ª–∏—Å—Ç—ñ–≤, –∑–∞–ø–∏—Ç—ñ–≤\n"
                "‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø—ñ–¥ —á–∞—Å —Å—É–ø—Ä–æ–≤–æ–¥—É\n\n"
                "üìå *–î–æ–¥–∞—Ç–∫–æ–≤–æ:* –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –†–†–û/–µ–∫–≤–∞–π—Ä–∏–Ω–≥—É ‚Äî +200‚ÄØ–≥—Ä–Ω/–º—ñ—Å"
            )
            markup = tpl_back().add(InlineKeyboardButton("üë• –¢–∞—Ä–∏—Ñ —ñ–∑ –Ω–∞–π–º–∞–Ω–∏–º–∏ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞–º–∏", callback_data="fop_staff"))
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "fop3nopdv":
            text = (
                "üë§ *–§–û–ü 3 –≥—Ä—É–ø–∞ (—î–¥–∏–Ω–∏–π –ø–æ–¥–∞—Ç–æ–∫ –±–µ–∑ –ü–î–í)*\n"
                "*–ë–∞–∑–æ–≤–∏–π —Ç–∞—Ä–∏—Ñ:* 400‚ÄØ–≥—Ä–Ω/–º—ñ—Å\n\n"
                "*–î—ñ—è–ª—å–Ω—ñ—Å—Ç—å –¥–æ–∑–≤–æ–ª–µ–Ω–∞:*\n"
                "‚Ä¢ –ü—Ä–æ–¥–∞–∂ —ñ –ø–æ—Å–ª—É–≥–∏ –±—É–¥—å‚Äë–∫–æ–º—É\n"
                "‚Ä¢ –ù–µ–æ–±–º–µ–∂–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤\n\n"
                "*–£ —Ç–∞—Ä–∏—Ñ –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É —Ç–∞ –ö–Ω–∏–≥–∏ –æ–±–ª—ñ–∫—É\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ª—ñ–º—ñ—Ç—É –¥–æ—Ö–æ–¥—É\n"
                "‚úÖ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–ª–∞—Ç\n"
                "‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º (–∑–∞ –¥–æ—Å—Ç—É–ø–æ–º)\n"
                "‚úÖ –©–æ–º—ñ—Å—è—á–Ω–∏–π –∞—É–¥–∏—Ç –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∑–∞—è–≤, –ª–∏—Å—Ç—ñ–≤, –∑–∞–ø–∏—Ç—ñ–≤\n"
                "‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å—É–ø—Ä–æ–≤–æ–¥—É\n\n"
                "üìå *–î–æ–¥–∞—Ç–∫–æ–≤–æ:* –ø—Ä–∏ –†–†–û/–µ–∫–≤–∞–π—Ä–∏–Ω–≥—É ‚Äî +200‚ÄØ–≥—Ä–Ω/–º—ñ—Å"
            )
            markup = tpl_back().add(InlineKeyboardButton("üë• –¢–∞—Ä–∏—Ñ —ñ–∑ –Ω–∞–π–º–∞–Ω–∏–º–∏ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞–º–∏", callback_data="fop_staff"))
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "fop3pdv":
            text = (
                "üë§ *–§–û–ü 3 –≥—Ä—É–ø–∞ (—î–¥–∏–Ω–∏–π –ø–æ–¥–∞—Ç–æ–∫ –∑ –ü–î–í)*\n"
                "*–ë–∞–∑–æ–≤–∏–π —Ç–∞—Ä–∏—Ñ:* 3500‚ÄØ–≥—Ä–Ω/–º—ñ—Å\n\n"
                "*–î—ñ—è–ª—å–Ω—ñ—Å—Ç—å –¥–æ–∑–≤–æ–ª–µ–Ω–∞:*\n"
                "‚Ä¢ –ü—Ä–æ–¥–∞–∂ —ñ –ø–æ—Å–ª—É–≥–∏ –±—É–¥—å‚Äë–∫–æ–º—É\n"
                "‚Ä¢ –ù–µ–æ–±–º–µ–∂–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤\n\n"
                "*–£ —Ç–∞—Ä–∏—Ñ –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É —Ç–∞ –ö–Ω–∏–≥–∏ –æ–±–ª—ñ–∫—É\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ª—ñ–º—ñ—Ç—É –¥–æ—Ö–æ–¥—É\n"
                "‚úÖ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–ª–∞—Ç\n"
                "‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º (–∑–∞ –¥–æ—Å—Ç—É–ø–æ–º)\n"
                "‚úÖ –©–æ–º—ñ—Å—è—á–Ω–∏–π –∞—É–¥–∏—Ç –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∑–∞—è–≤, –ª–∏—Å—Ç—ñ–≤, –∑–∞–ø–∏—Ç—ñ–≤\n"
                "‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å—É–ø—Ä–æ–≤–æ–¥—É\n\n"
                "üí∞ *–ë–ª–æ–∫ –ü–î–í:*\n"
                "‚úÖ –†–∞—Ö—É–Ω–∫–∏‚Äë–Ω–∞–∫–ª–∞–¥–Ω—ñ, –∞–∫—Ç–∏ (–¥–æ 10/–º—ñ—Å)\n"
                "‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤ –Ñ–†–ü–ù\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Ö—ñ–¥–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö\n"
                "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –£–ö–¢ –ó–ï–î\n"
                "‚úÖ –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª—ñ–º—ñ—Ç—É –≤ –°–ï–ê –ü–î–í\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó –∑ –ü–î–í\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–ø–ª–∞—Ç–∏ –ø–æ–¥–∞—Ç–∫—É\n\n"
                "üìå *–í–∞—Ä—Ç—ñ—Å—Ç—å —Ç–∞—Ä–∏—Ñ—É —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ ‚Äî –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –æ–±—Å—è–≥—É –æ–ø–µ—Ä–∞—Ü—ñ–π —Ç–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∏.*"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "fop_staff":
            text = (
                "üë§ *–§–û–ü –Ω–∞ —î–¥–∏–Ω–æ–º—É –ø–æ–¥–∞—Ç–∫—É (–∑ –Ω–∞–π–º–∞–Ω–∏–º–∏ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞–º–∏)*\n"
                "*–ë–∞–∑–æ–≤–∏–π —Ç–∞—Ä–∏—Ñ:* 2300‚ÄØ–≥—Ä–Ω/–º—ñ—Å\n\n"
                "*–£ —Ç–∞—Ä–∏—Ñ –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É —Ç–∞ –ö–Ω–∏–≥–∏ –æ–±–ª—ñ–∫—É\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ª—ñ–º—ñ—Ç—É –¥–æ—Ö–æ–¥—É\n"
                "‚úÖ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–ª–∞—Ç\n"
                "‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º (–∑–∞ –¥–æ—Å—Ç—É–ø–æ–º)\n"
                "‚úÖ –©–æ–º—ñ—Å—è—á–Ω–∏–π –∞—É–¥–∏—Ç –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∑–∞—è–≤, –ª–∏—Å—Ç—ñ–≤, –∑–∞–ø–∏—Ç—ñ–≤\n"
                "‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å—É–ø—Ä–æ–≤–æ–¥—É\n\n"
                "üë• *–ó–∞—Ä–ø–ª–∞—Ç–Ω–∏–π –±–ª–æ–∫:*\n"
                "‚úÖ –ù–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∑–∞—Ä–ø–ª–∞—Ç–∏ (–¥–æ 3 –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤)\n"
                "‚úÖ –î–≤–∞ —Ä–∞–∑–∏ –Ω–∞ –º—ñ—Å—è—Ü—å –≤–∏–ø–ª–∞—Ç–∏ —Ç–∞ –ø–æ–¥–∞—Ç–∫–∏\n"
                "‚úÖ –ü–ª–∞—Ç—ñ–∂–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ (–∫–ª—ñ—î–Ω—Ç‚Äë–±–∞–Ω–∫)\n"
                "‚úÖ –ö–∞–¥—Ä–æ–≤—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ (–Ω–∞–∫–∞–∑–∏)\n"
                "‚úÖ –í—ñ–¥–ø—É—Å—Ç–∫–∏, –ª—ñ–∫–∞—Ä–Ω—è–Ω—ñ, —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è\n"
                "‚úÖ –ó–∞—Ä–ø–ª–∞—Ç–Ω–∞ –∑–≤—ñ—Ç–Ω—ñ—Å—Ç—å\n\n"
                "üìå –ö–æ–∂–µ–Ω –Ω–∞—Å—Ç—É–ø–Ω–∏–π –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫ +100‚ÄØ–≥—Ä–Ω/–º—ñ—Å"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "fop_general":
            text = (
                "üë§ *–§–û–ü –Ω–∞ –∑–∞–≥–∞–ª—å–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ*\n"
                "*–ë–∞–∑–æ–≤–∏–π —Ç–∞—Ä–∏—Ñ:* 3500‚ÄØ–≥—Ä–Ω/–º—ñ—Å\n\n"
                "*–£ —Ç–∞—Ä–∏—Ñ –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É —Ç–∞ –≤–µ–¥–µ–Ω–Ω—è –ö–Ω–∏–≥–∏ –æ–±–ª—ñ–∫—É –¥–æ—Ö–æ–¥—ñ–≤ —Ç–∞ –≤–∏—Ç—Ä–∞—Ç\n"
                "‚úÖ –í–µ–¥–µ–Ω–Ω—è –§–æ—Ä–º–∏ –æ–±–ª—ñ–∫—É —Ç–æ–≤–∞—Ä–Ω–∏—Ö –∑–∞–ø–∞—Å—ñ–≤\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ª—ñ–º—ñ—Ç—É –¥–æ—Ö–æ–¥—É 1 –º–ª–Ω (–¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –ø–ª–∞—Ç–Ω–∏–∫–æ–º –ü–î–í)\n"
                "‚úÖ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ —Å–ø–ª–∞—Ç—É –ø–æ–¥–∞—Ç–∫—ñ–≤, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–ª–∞—Ç\n"
                "‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–¥—ñ–π—Å–Ω–µ–Ω–Ω—è –æ–ø–ª–∞—Ç –ø–æ–¥–∞—Ç–∫—ñ–≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º (–∑–∞ –¥–æ—Å—Ç—É–ø–æ–º)\n"
                "‚úÖ –©–æ–º—ñ—Å—è—á–Ω–∏–π –∞—É–¥–∏—Ç –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∑–∞—è–≤, –ª–∏—Å—Ç—ñ–≤, –∑–∞–ø–∏—Ç—ñ–≤\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∞–∫—Ü–∏–∑–Ω–æ–≥–æ –ø–æ–¥–∞—Ç–∫—É, –ø–æ–¥–∞–Ω–Ω—è –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó –∑ –∞–∫—Ü–∏–∑–Ω–æ–≥–æ –ø–æ–¥–∞—Ç–∫—É\n"
                "‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ—Ü–µ—Å—ñ —Å—É–ø—Ä–æ–≤–æ–¥—É\n\n"
                "üìå *–î–æ–¥–∞—Ç–∫–æ–≤–æ:* –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –Ω–∞–π–º–∞–Ω–∏—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤ ‚Äî +1500‚ÄØ–≥—Ä–Ω/–º—ñ—Å"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "llc":
            text = (
                "üè¢ *–¢–û–í/–ü–ü*\n"
                "*–ë–∞–∑–æ–≤–∏–π —Ç–∞—Ä–∏—Ñ:* 5000‚ÄØ–≥—Ä–Ω/–º—ñ—Å\n\n"
                "*–£ —Ç–∞—Ä–∏—Ñ –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–∞ —Ä–∞—Ö—É–Ω–∫–∞—Ö –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–æ–≥–æ –æ–±–ª—ñ–∫—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ—ó —Ç–∞ –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ, –∑–∞—è–≤, –ª–∏—Å—Ç—ñ–≤, –∑–∞–ø–∏—Ç—ñ–≤\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –ª—ñ–º—ñ—Ç—É –¥–æ—Ö–æ–¥—É 1 –º–ª–Ω (–¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –ø–ª–∞—Ç–Ω–∏–∫–æ–º –ü–î–í)\n"
                "‚úÖ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ —Å–ø–ª–∞—Ç—É –ø–æ–¥–∞—Ç–∫—ñ–≤, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–ª–∞—Ç\n"
                "‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–¥—ñ–π—Å–Ω–µ–Ω–Ω—è –æ–ø–ª–∞—Ç –ø–æ–¥–∞—Ç–∫—ñ–≤ —Ç–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º (–∑–∞ –¥–æ—Å—Ç—É–ø–æ–º)\n"
                "‚úÖ –©–æ–º—ñ—Å—è—á–Ω–∏–π –∞—É–¥–∏—Ç –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –ù–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–ø–ª–∞—Ç–∞ –∑–∞—Ä–æ–±—ñ—Ç–Ω–æ—ó –ø–ª–∞—Ç–∏\n"
                "‚úÖ –ë–∞–∑–æ–≤—ñ –∫–∞–¥—Ä–æ–≤—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ (–ù–∞–∫–∞–∑–∏)\n"
                "‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ—Ü–µ—Å—ñ —Å—É–ø—Ä–æ–≤–æ–¥—É\n\n"
                "üìå *–í–∞—Ä—Ç—ñ—Å—Ç—å —Ç–∞—Ä–∏—Ñ—É —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ ‚Äî –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥*\n"
                "‚Ä¢ —Å–∏—Å—Ç–µ–º–∏ –æ–ø–æ–¥–∞—Ç–∫—É–≤–∞–Ω–Ω—è (–∑–∞–≥–∞–ª—å–Ω–∞/—Å–ø—Ä–æ—â–µ–Ω–∞)\n"
                "‚Ä¢ —Å—Ç–∞—Ç—É—Å—É –ø–ª–∞—Ç–Ω–∏–∫–∞ –ü–î–í\n"
                "‚Ä¢ –≤–∏–¥—É –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ\n"
                "‚Ä¢ –æ–±—Å—è–≥—É –æ–ø–µ—Ä–∞—Ü—ñ–π, –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —ñ- —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∏ –≤–∞—à–æ—ó –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ, –ø—Ä–∏–¥–±–∞–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è (MeDoc)\n"
                "‚Ä¢ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –Ω–∞–π–º–∞–Ω–∏—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤\n"
                "‚Ä¢ –≤–∏–ø–∞–¥–∫—ñ–≤ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "reg_fop":
            text = (
                "üìù *–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –§–û–ü*\n"
                "*–í–∞—Ä—Ç—ñ—Å—Ç—å:* 1000‚ÄØ–≥—Ä–Ω\n\n"
                "*–£ –≤–∞—Ä—Ç—ñ—Å—Ç—å –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –ü–æ–ø–µ—Ä–µ–¥–Ω—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è\n"
                "‚úÖ –í–∏–±—ñ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –æ–ø–æ–¥–∞—Ç–∫—É–≤–∞–Ω–Ω—è\n"
                "‚úÖ –ü—ñ–¥–±—ñ—Ä –ö–í–ï–î –ø—ñ–¥ –≤–∏–¥–∏ –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ\n"
                "‚úÖ –î–æ–ø–æ–º–æ–≥–∞ —ñ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É\n"
                "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –ø–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –±–æ—Ä–≥—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –∑–∞—è–≤–∏ –Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é –§–û–ü\n"
                "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –§–û–ü –Ω–∞ –æ–±–ª—ñ–∫\n"
                "‚úÖ –í–∏–ø–∏—Å–∫–∞ –ø—Ä–æ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é –§–û–ü —Ç–∞ –í–∏—Ç—è–≥ –ø–ª–∞—Ç–Ω–∏–∫–∞ —î–¥–∏–Ω–æ–≥–æ –ø–æ–¥–∞—Ç–∫—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –§–æ—Ä–º–∏ 20-–û–ü–ü\n"
                "‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ü–†–†–û\n"
                "‚úÖ –î–æ–ø–æ–º–æ–≥–∞ –∑ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è–º —Ä–∞—Ö—É–Ω–∫—É –≤ –±–∞–Ω–∫—É\n"
                "‚úÖ –ù–∞–¥–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤ –¥–ª—è –æ–ø–ª–∞—Ç–∏ –ø–æ–¥–∞—Ç–∫—ñ–≤"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "close_fop":
            text = (
                "üìù *–ó–∞–∫—Ä–∏—Ç—Ç—è –§–û–ü*\n"
                "*–í–∞—Ä—Ç—ñ—Å—Ç—å:* 1500‚ÄØ–≥—Ä–Ω\n\n"
                "*–£ –≤–∞—Ä—Ç—ñ—Å—Ç—å –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –ü–æ–ø–µ—Ä–µ–¥–Ω—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É\n"
                "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –î–æ–ø–æ–º–æ–≥–∞ —ñ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É\n"
                "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –ø–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –±–æ—Ä–≥—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –∑–∞—è–≤–∏ –Ω–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –§–û–ü\n"
                "‚úÖ –í–∏–ø–∏—Å–∫–∞ –ø—Ä–æ –∑–∞–∫—Ä–∏—Ç—Ç—è –§–û–ü\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –ª—ñ–∫–≤—ñ–¥–∞—Ü—ñ–π–Ω–æ—ó –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –§–æ—Ä–º–∏ 20-–û–ü–ü –Ω–∞ –∑–Ω—è—Ç—Ç—è –æ–±'—î–∫—Ç—ñ–≤\n"
                "‚úÖ –°–∫–∞—Å—É–≤–∞–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –ü–†–†–û"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "decl_fop":
            text = (
                "üìë *–î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è –§–û–ü –Ω–∞ –Ñ–ü*\n"
                "*–í–∞—Ä—Ç—ñ—Å—Ç—å:* 1000‚ÄØ–≥—Ä–Ω\n\n"
                "*–£ –≤–∞—Ä—Ç—ñ—Å—Ç—å –≤—Ö–æ–¥–∏—Ç—å:*\n"
                "‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—É\n"
                "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É\n"
                "‚úÖ –î–æ–ø–æ–º–æ–≥–∞ —ñ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É\n"
                "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –ø–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –±–æ—Ä–≥—É\n"
                "‚úÖ –ü–æ–¥–∞–Ω–Ω—è –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó"
            )
            markup = tpl_back()
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown")

        elif call.data == "contacts":
            text = (
                "üìû –ó–≤‚Äô—è–∂—ñ—Ç—å—Å—è –∑ –Ω–∞–º–∏ —É –∑—Ä—É—á–Ω–∏–π —Å–ø–æ—Å—ñ–±:\n\n"
                "üì± –¢–µ–ª–µ—Ñ–æ–Ω/Viber/Telegram: +38‚ÄØ(098)‚ÄØ159‚Äë75‚Äë70\n"
                "‚úâÔ∏è Email: r.o.c@ukr.net\n"
                "üì≤ [Instagram](https://www.instagram.com/reliable_outsorsing_company/)\n"
                "üí¨ [Telegram](https://t.me/Reliable_Outsorsing_Company)\n"
                "üí¨ [WhatsApp](https://wa.me/380981597570)"
            )
            markup = InlineKeyboardMarkup(row_width=1).add(
                InlineKeyboardButton("üîô –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é", callback_data="main_menu")
            )
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown", disable_web_page_preview=True)

        elif call.data == "about":
            text = (
                "üë§ *–ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é*\n\n"
                "*Reliable Outsorsing Company* ‚Äì –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–∞ –∞—É—Ç—Å–æ—Ä—Å–∏–Ω–≥–æ–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—è, —è–∫–∞ –Ω–∞—Å–ª—ñ–¥—É—î —î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏–π —Å–µ—Ä–≤—ñ—Å –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞ –¥—ñ–ª–æ–≤—ñ –≤—ñ–¥–Ω–æ—Å–∏–Ω–∏. –î–ª—è –Ω–∞—Å –≤–∞–∂–ª–∏–≤–∏–π –∫–æ–∂–µ–Ω –∫–ª—ñ—î–Ω—Ç —ñ —Ç–æ–º—É –ø—Ä–∞–≥–Ω–µ–º–æ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —è–∫—ñ—Å–Ω–∏–π —Å–µ—Ä–≤—ñ—Å –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞–¥–æ–≤—ñ–ª—å–Ω–∏—Ç–∏ –í–∞—à—ñ –ø–æ—Ç—Ä–µ–±–∏. –ê –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª—ñ–∑–º —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–µ —Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ –±—ñ–ª—å—à –Ω—ñ–∂ 10-—Ä—ñ—á–Ω–∏–º –¥–æ—Å–≤—ñ–¥–æ–º —Ä–æ–±–æ—Ç–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ–π–Ω–∏–º–∏ —Ñ–æ—Ä–º–∞–º–∏, –≤–∏–¥–∞–º–∏ –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ —Ç–∞ —Å–∏—Å—Ç–µ–º–∞–º–∏ –æ–ø–æ–¥–∞—Ç–∫—É–≤–∞–Ω–Ω—è.\n\n"
                "*–ù–∞–¥–∞—î–º–æ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫—ñ –ø–æ—Å–ª—É–≥–∏:*\n"
                "‚úÖ –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –¥–ª—è –§–û–ü —Ç–∞ –¢–û–í\n"
                "‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –∑ –ø–∏—Ç–∞–Ω—å –≤–∏–±–æ—Ä—É —Å–∏—Å—Ç–µ–º–∏ –æ–ø–æ–¥–∞—Ç–∫—É–≤–∞–Ω–Ω—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–∞\n"
                "‚úÖ –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –§–û–ü, –ø—ñ–¥–±—ñ—Ä –≥—Ä—É–ø–∏ —î–¥–∏–Ω–æ–≥–æ –ø–æ–¥–∞—Ç–∫—É —Ç–∞ –ö–í–ï–î—ñ–≤, –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –±–∞–Ω–∫—ñ–≤—Å—å–∫–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É\n"
                "‚úÖ –ó–∞–∫—Ä–∏—Ç—Ç—è –§–û–ü, –ª—ñ–∫–≤—ñ–¥–∞—Ü—ñ–π–Ω—ñ –∑–≤—ñ—Ç–∏\n"
                "‚úÖ –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ –≤ –∫–æ–Ω—Ç—Ä–æ–ª—é—é—á—ñ –æ—Ä–≥–∞–Ω–∏\n"
                "‚úÖ –í–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—è –∫–ª—é—á—ñ–≤ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É (–ï–¶–ü/–ö–ï–ü)\n"
                "‚úÖ –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–æ–≥–æ –æ–±–ª—ñ–∫—É\n"
                "‚úÖ –ù–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∑–∞—Ä–æ–±—ñ—Ç–Ω–æ—ó –ø–ª–∞—Ç–∏, —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è, –≤—ñ–¥–ø—É—Å—Ç–∫–∏, –ª—ñ–∫–∞—Ä–Ω—è–Ω—ñ\n"
                "‚úÖ –û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –ø–µ—Ä–≤–∏–Ω–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤\n"
                "‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –∑ –ø–∏—Ç–∞–Ω—å –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –†–†–û —Ç–∞ –ü–†–†–û, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ü–†–†–û\n"
                "‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–ø–ª–∞—Ç–∏ –≤—Å—ñ—Ö –ø–æ–¥–∞—Ç–∫—ñ–≤, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∫–≤—ñ–∑–∏—Ç—ñ–≤, –ø–ª–∞—Ç—ñ–∂–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—á–∞—Å–Ω–æ—ó —Å–ø–ª–∞—Ç–∏ —Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—ñ —Ä–∞—Ö—É–Ω–∫—ñ–≤\n"
                "‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è —à—Ç–∞—Ç–Ω–æ–º—É –±—É—Ö–≥–∞–ª—Ç–µ—Ä—É —Ç–∞ –¥–æ–ø–æ–º–æ–≥–∞ —É –≤–∏—Ä—ñ—à–µ–Ω–Ω—ñ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å\n\n"
                "üìû *–¢–µ–ª–µ—Ñ–æ–Ω—É–π—Ç–µ –∞–±–æ –ø–∏—à—ñ—Ç—å –Ω–∞–º —É –±—É–¥—å-—è–∫–∏–π –∑—Ä—É—á–Ω–∏–π –¥–ª—è –í–∞—Å —á–∞—Å, –∞ –º–∏ –∑–∞–ø—Ä–æ–ø–æ–Ω—É—î–º–æ —ñ –≤–ø—Ä–æ–≤–∞–¥–∏–º–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏, —â–æ –ø—ñ–¥—Ö–æ–¥—è—Ç—å —Å–∞–º–µ –¥–ª—è –í–∞—à–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É:*\n"
                "üì≤ [Instagram](https://www.instagram.com/reliable_outsorsing_company/)\n"
                "üí¨ Viber/Telegram: 098-159-75-70\n"
                "‚úâÔ∏è e-Mail: r.o.c@ukr.net\n\n"
                "–î–µ–ª–µ–≥—É–π—Ç–µ –≤–µ–¥–µ–Ω–Ω—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–æ–≥–æ –æ–±–ª—ñ–∫—É –Ω–∞–º, —Å–ø—Ä—è–º—É–π—Ç–µ —á–∞—Å —ñ —Ä–µ—Å—É—Ä—Å–∏ –Ω–∞ –¥—ñ–π—Å–Ω–æ –≤–∞–∂–ª–∏–≤—ñ –ø—Ä–æ—Ü–µ—Å–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è —ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –í–∞—à–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É —Ç–∞ –±—É–¥—É–π–º–æ –£–∫—Ä–∞—ó–Ω—É –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ —Ä–∞–∑–æ–º."
            )
            markup = InlineKeyboardMarkup(row_width=1).add(
                InlineKeyboardButton("üîô –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é", callback_data="main_menu")
            )
            bot.edit_message_text(text, chat_id, message_id, reply_markup=markup, parse_mode="Markdown", disable_web_page_preview=True)

        elif call.data == "main_menu":
            send_main_menu(chat_id)

        bot.answer_callback_query(call.id)  # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î–º–æ callback

    except Exception as e:
        logger.error(f"–ü–æ–º–∏–ª–∫–∞ –æ–±—Ä–æ–±–∫–∏ callback {call.data}: {e}")
        bot.answer_callback_query(call.id, "–í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.")

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è polling —ñ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Å–ø—Ä–æ–±–∞–º–∏
async def run_polling():
    logger.info("–ó–∞–ø—É—Å–∫ polling...")
    while True:
        try:
            await bot.polling(none_stop=True, interval=0, timeout=20)
        except Exception as e:
            logger.error(f"–ü–æ–º–∏–ª–∫–∞ polling: {e}")
            keep_alive()  # –ü—ñ–Ω–≥—É—î–º–æ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
            await asyncio.sleep(10)  # –ß–µ–∫–∞—î–º–æ 10 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == "__main__":
    logger.info("–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω–æ")
    try:
        bot.remove_webhook()
        logger.info("Webhook –≤–∏–¥–∞–ª–µ–Ω–æ")
    except Exception as e:
        logger.error(f"–ü–æ–º–∏–ª–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è webhook: {e}")

    try:
        asyncio.run(run_polling())
    except Exception as e:
        logger.error(f"–ö—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞ –∑–∞–ø—É—Å–∫—É: {e}")
        raise
